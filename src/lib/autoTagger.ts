/**
 * Auto-tagger for dream content
 * Extracts relevant tags from dream text based on common dream themes
 */

// Tag categories with their keywords
const tagMappings: Record<string, string[]> = {
    '#ุณูุฑ': ['ุณูุฑ', 'ุทุงุฆุฑุฉ', 'ูุทุงุฑ', 'ุณูุงุฑุฉ', 'ุทุฑูู', 'ุฑุญูุฉ', 'ูุทุงุฑ', 'ุณุงูุฑุช', 'ุฃุณุงูุฑ'],
    '#ูุงู': ['ูุงู', 'ุฐูุจ', 'ูุถุฉ', 'ูููุฏ', 'ุฏุฑุงูู', 'ุฑูุงูุงุช', 'ุบูู', 'ูููุฑ', 'ููุฒ', 'ุซุฑูุฉ'],
    '#ุฃูุงุฑุจ': ['ุฃุจ', 'ุฃู', 'ุฃุฎ', 'ุฃุฎุช', 'ุฌุฏ', 'ุฌุฏุฉ', 'ุนู', 'ุฎุงู', 'ุงุจู', 'ุจูุช', 'ุฒูุฌ', 'ุฒูุฌุฉ', 'ุนุงุฆูุฉ'],
    '#ูุงุก': ['ูุงุก', 'ุจุญุฑ', 'ููุฑ', 'ุจุฆุฑ', 'ูุทุฑ', 'ุณุจุงุญุฉ', 'ุฃุณุจุญ', 'ุบุฑู', 'ููุฌ', 'ุดูุงู'],
    '#ุญููุงูุงุช': ['ูุทุฉ', 'ููุจ', 'ุญุตุงู', 'ุฃุณุฏ', 'ุซุนุจุงู', 'ุทูุฑ', 'ุนุตููุฑ', 'ูุณุฑ', 'ุณููุฉ', 'ุฌูู', 'ุฎุฑูู'],
    '#ููุช': ['ููุช', 'ููุช', 'ุฌูุงุฒุฉ', 'ูุจุฑ', 'ููุจุฑุฉ', 'ูุชููู', 'ูุชููู', 'ุชููู'],
    '#ุฒูุงุฌ': ['ุฒูุงุฌ', 'ุนุฑุณ', 'ุฎุทุจุฉ', 'ุนุฑูุณ', 'ุนุฑูุณ', 'ูุฑุญ', 'ุฎุทูุจุฉ'],
    '#ุจูุช': ['ุจูุช', 'ููุฒู', 'ุบุฑูุฉ', 'ุจุงุจ', 'ูุงูุฐุฉ', 'ุณูู', 'ุฌุฏุงุฑ', 'ุดูุฉ', 'ูุตุฑ'],
    '#ุทุนุงู': ['ุทุนุงู', 'ุฃูู', 'ุฎุจุฒ', 'ูุญู', 'ูุงููุฉ', 'ุชูุฑ', 'ุนุณู', 'ุญููุจ'],
    '#ููุงุจุณ': ['ุซูุจ', 'ูุณุชุงู', 'ููุงุจุณ', 'ูููุต', 'ุญุฐุงุก', 'ูุนุงู', 'ุนุจุงุกุฉ', 'ุญุฌุงุจ'],
    '#ุตูุงุฉ': ['ุตูุงุฉ', 'ูุณุฌุฏ', 'ุฃุฐุงู', 'ูุถูุก', 'ุณุฌูุฏ', 'ุฑููุน', 'ูุฑุขู', 'ุฏุนุงุก'],
    '#ุทูุฑุงู': ['ุทูุฑุงู', 'ุฃุทูุฑ', 'ุทุงุฆุฑ', 'ุณูุงุก', 'ุงุฑุชูุงุน', 'ุนุงููุงู', 'ุฌูุงุญ'],
    '#ุณููุท': ['ุณููุท', 'ุณูุทุช', 'ุฃุณูุท', 'ูุจูุท', 'ููุฉ', 'ุญูุฑุฉ', 'ุงูููุงุฑ'],
    '#ูุทุงุฑุฏุฉ': ['ูุทุงุฑุฏุฉ', 'ูุฑุจ', 'ุฎูู', 'ูุทุงุฑุฏูู', 'ุฌุฑู', 'ุฃุฑูุถ', 'ุฃูุฑุจ'],
    '#ุถูุก': ['ุถูุก', 'ููุฑ', 'ุดูุณ', 'ููุฑ', 'ูุฌูู', 'ุฅุถุงุกุฉ', 'ุธูุงู', 'ููู'],
    '#ุฃุทูุงู': ['ุทูู', 'ุฃุทูุงู', 'ุฑุถูุน', 'ููููุฏ', 'ููุงุฏุฉ', 'ุตุบูุฑ'],
    '#ุนูู': ['ุนูู', 'ูุธููุฉ', 'ููุชุจ', 'ุดุฑูุฉ', 'ูุฏูุฑ', 'ููุธู', 'ุฑุงุชุจ'],
    '#ูุฑุถ': ['ูุฑุถ', 'ูุฑูุถ', 'ูุณุชุดูู', 'ุทุจูุจ', 'ุฏูุงุก', 'ุนูุงุฌ', 'ุดูุงุก'],
    '#ุญุจ': ['ุญุจ', 'ุญุจูุจ', 'ุญุจูุจุฉ', 'ุนุดู', 'ููุจ', 'ูุดุงุนุฑ'],
    '#ุฎูู': ['ุฎูู', 'ุฑุนุจ', 'ูุงุจูุณ', 'ูุฒุน', 'ููู', 'ููุน'],
};

/**
 * Extract tags from dream content
 * @param content - The dream text content
 * @returns Array of relevant tags found in the dream
 */
export function extractTags(content: string): string[] {
    const tags: Set<string> = new Set();
    const normalizedContent = content.toLowerCase();

    for (const [tag, keywords] of Object.entries(tagMappings)) {
        for (const keyword of keywords) {
            if (normalizedContent.includes(keyword)) {
                tags.add(tag);
                break; // Found match for this tag category, move to next
            }
        }
    }

    return Array.from(tags);
}

/**
 * Get tag display info
 * @param tag - The tag string (e.g. '#ุณูุฑ')
 * @returns Object with tag info for display
 */
export function getTagInfo(tag: string): { icon: string; color: string } {
    const tagIcons: Record<string, { icon: string; color: string }> = {
        '#ุณูุฑ': { icon: 'โ๏ธ', color: '#3b82f6' },
        '#ูุงู': { icon: '๐ฐ', color: '#f59e0b' },
        '#ุฃูุงุฑุจ': { icon: '๐จโ๐ฉโ๐งโ๐ฆ', color: '#ec4899' },
        '#ูุงุก': { icon: '๐ง', color: '#06b6d4' },
        '#ุญููุงูุงุช': { icon: '๐พ', color: '#84cc16' },
        '#ููุช': { icon: '๐ฏ๏ธ', color: '#6b7280' },
        '#ุฒูุงุฌ': { icon: '๐', color: '#f43f5e' },
        '#ุจูุช': { icon: '๐', color: '#8b5cf6' },
        '#ุทุนุงู': { icon: '๐ฝ๏ธ', color: '#f97316' },
        '#ููุงุจุณ': { icon: '๐', color: '#a855f7' },
        '#ุตูุงุฉ': { icon: '๐', color: '#22c55e' },
        '#ุทูุฑุงู': { icon: '๐ฆ', color: '#0ea5e9' },
        '#ุณููุท': { icon: 'โฌ๏ธ', color: '#ef4444' },
        '#ูุทุงุฑุฏุฉ': { icon: '๐', color: '#f97316' },
        '#ุถูุก': { icon: 'โจ', color: '#fbbf24' },
        '#ุฃุทูุงู': { icon: '๐ถ', color: '#fb7185' },
        '#ุนูู': { icon: '๐ผ', color: '#64748b' },
        '#ูุฑุถ': { icon: '๐ฅ', color: '#14b8a6' },
        '#ุญุจ': { icon: 'โค๏ธ', color: '#e11d48' },
        '#ุฎูู': { icon: '๐จ', color: '#7c3aed' },
    };

    return tagIcons[tag] || { icon: '๐ท๏ธ', color: '#6b7280' };
}

export default { extractTags, getTagInfo };
